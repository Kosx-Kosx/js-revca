COFFEE = coffee
COFFEE_FLAGS = -m -b

all: compile

test:
	mocha tests/test*.coffee --compilers coffee:coffee-script

#compile:
#	coffee -m -b -c -o scripts scripts-src
#	ln -f scripts-src/ext/*.js scripts/ext/

compile: everything

clean:
	rm $(ALL_OUTPUTS)

scripts/minified.js: $(ALL_OUTPUTS)
	cat $(ALL_OUTPUTS) |closure --compilation_level ADVANCED_OPTIMIZATIONS > scripts/minified.js


.must-be-master:
	git checkout master

publish: .must-be-master test all
	git checkout gh-pages
	git add images *.html scripts scripts-src *.css LICENSE README.md
	git commit -m "Automatically generated commit"
